#!/usr/bin/env node

const program = require('commander');
const fs = require('fs');
const path = require('path');

program
  .command('init')
  .option('-r, --recursive', 'Remove recursively')
  .action((cmd) => {
    const source = path.resolve(__dirname, '..');
    const destination = process.cwd();

    if (source === destination) {
      console.log('Cannot install into itself.');
      return;
    }

    console.log(`Init ${source} -> ${destination}`);

    function copy(file) {
      const toFile = file.endsWith('_publish') ? file.slice(0, -8) : file;
      console.log(`Copying ${toFile}...`)
      fs.copyFileSync(path.resolve(source, file), path.resolve(destination, toFile));
    }

    copy('.editorconfig');
    copy('.gitignore');
    copy('.npmignore');
    copy('tsconfig.json');
    copy('tslint.json');

    console.log('. Done');
  });

program.parse(process.argv);
